import{a as j,b as $}from"./chunk-JTD2GUQY.js";import{a as M,b as U}from"./chunk-EOS4WQRA.js";import{c as R,d as V}from"./chunk-JOV6O4AC.js";import{a as k,b as D}from"./chunk-24SHYF34.js";import{Ab as a,Ac as F,Bb as m,Cb as c,G as T,Jb as P,Kb as O,Qa as t,Qb as l,Ra as y,Rb as p,X as w,_ as A,bb as g,da as E,eb as d,ia as B,ib as r,jb as i,kb as H,nb as h,pb as x,r as C,ra as v,rb as _,sa as f,tc as G,uc as N,vc as L}from"./chunk-NJXLY5TY.js";var b=class n{constructor(o,e){this.http=o;this.authService=e}apiUrl=M.apiUrl+"game/game-history";getGameHistory(){let o=this.authService.getUserData(),e=new k({Authorization:`Bearer ${o?.access_token}`});return this.http.get(this.apiUrl,{headers:e}).pipe(w(s=>s),T(s=>C(()=>new Error(s.error.message||"Ocurrio un error intentalo mas tarde"))))}static \u0275fac=function(e){return new(e||n)(E(D),E(U))};static \u0275prov=A({token:n,factory:n.\u0275fac,providedIn:"root"})};var z=()=>[];function Q(n,o){n&1&&(r(0,"span",28),a(1,"\u2714"),i())}function W(n,o){n&1&&(r(0,"span",29),a(1,"\u2718"),i())}function X(n,o){if(n&1&&(r(0,"p",30)(1,"strong"),a(2),l(3,"translate"),i(),a(4),l(5,"translate"),i()),n&2){let e=_().$implicit;t(2),m(p(3,2,"RESULTS.FEEDBACK")),t(2),c(" ",e.feedback_variable||p(5,4,"NO_FEEDBACK")," ")}}function J(n,o){n&1&&(r(0,"span",28),a(1,"\u2714"),i())}function Y(n,o){n&1&&(r(0,"span",29),a(1,"\u2718"),i())}function Z(n,o){if(n&1&&(r(0,"p",30)(1,"strong"),a(2),l(3,"translate"),i(),a(4),l(5,"translate"),i()),n&2){let e=_().$implicit;t(2),m(p(3,2,"RESULTS.FEEDBACK")),t(2),c(" ",e.feedback_value||p(5,4,"NO_FEEDBACK")," ")}}function ee(n,o){n&1&&(r(0,"span",28),a(1,"\u2714"),i())}function te(n,o){n&1&&(r(0,"span",29),a(1,"\u2718"),i())}function ie(n,o){if(n&1&&(r(0,"p",30)(1,"strong"),a(2),l(3,"translate"),i(),a(4),l(5,"translate"),i()),n&2){let e=_().$implicit;t(2),m(p(3,2,"RESULTS.FEEDBACK")),t(2),c(" ",e.feedback_recomend||p(5,4,"NO_FEEDBACK")," ")}}function ne(n,o){n&1&&H(0,"hr",31)}function re(n,o){if(n&1&&(r(0,"li",20)(1,"p")(2,"strong",21),a(3),l(4,"translate"),i(),a(5),i(),r(6,"div",22)(7,"strong",21),a(8),l(9,"translate"),i(),r(10,"span",23),a(11),i(),r(12,"span"),g(13,Q,2,0,"span",24)(14,W,2,0,"span",25),i()(),g(15,X,6,6,"p",26),r(16,"div",22)(17,"strong",21),a(18),l(19,"translate"),i(),r(20,"span",23),a(21),i(),r(22,"span"),g(23,J,2,0,"span",24)(24,Y,2,0,"span",25),i()(),g(25,Z,6,6,"p",26),r(26,"div",22)(27,"strong",21),a(28),l(29,"translate"),i(),r(30,"span",23),a(31),i(),r(32,"span"),g(33,ee,2,0,"span",24)(34,te,2,0,"span",25),i()(),g(35,ie,6,6,"p",26)(36,ne,1,0,"hr",27),i()),n&2){let e=o.$implicit,s=o.last;t(3),c("",p(4,18,"QUESTION.NFR"),":"),t(2),c(" ",e.nfr," "),t(3),m(p(9,20,"MODAL_CONFIRMATION.LINGUISTIC_VARIABLE")),t(3),c("(",e.user_variable,")"),t(2),d("ngIf",e.correct_variable),t(),d("ngIf",!e.correct_variable),t(),d("ngIf",!e.correct_variable),t(3),m(p(19,22,"MODAL_CONFIRMATION.LINGUISTIC_VALUE")),t(3),c("(",e.user_value,")"),t(2),d("ngIf",e.correct_value),t(),d("ngIf",!e.correct_value),t(),d("ngIf",!e.correct_value),t(3),m(p(29,24,"MODAL_CONFIRMATION.LINGUISTIC_RECOMMENDATION")),t(3),c("(",e.user_recomend,")"),t(2),d("ngIf",e.correct_recomend),t(),d("ngIf",!e.correct_recomend),t(),d("ngIf",!e.correct_recomend),t(),d("ngIf",!s)}}function ae(n,o){if(n&1){let e=h();r(0,"div",11)(1,"div",12)(2,"div",13)(3,"h3",14),a(4),l(5,"translate"),i()(),r(6,"div",15)(7,"ul",16),g(8,re,37,26,"li",17),i()(),r(9,"div",18)(10,"button",19),x("click",function(){v(e);let u=_();return f(u.closeModal())}),a(11),l(12,"translate"),i()()()()}if(n&2){let e=_();t(4),m(p(5,3,"TABLE.ANSWERS")),t(4),d("ngForOf",e.selectedAnswers),t(3),c(" ",p(12,5,"ALERT.BUTTON_CLOSE")," ")}}function oe(n,o){if(n&1){let e=h();r(0,"tr",32)(1,"td",33),a(2),i(),r(3,"td",33),a(4),i(),r(5,"td",34),a(6),i(),r(7,"td",33),a(8),i(),r(9,"td",33)(10,"button",35),x("click",function(){let u=v(e).$implicit,I=_();return f(I.openAnswersModal(u.answered_questions))}),a(11),l(12,"translate"),i()()()}if(n&2){let e=o.$implicit;t(2),m(e.id),t(2),m(e.game_room.code),t(),d("ngClass",e.score>=70?"text-green-500":"text-red-500"),t(),c(" ",e.score," / 100 "),t(2),m(e.duration),t(3),c(" ",p(12,6,"TABLE.VIEW_ANSWERS")," ")}}function se(n,o){if(n&1){let e=h();r(0,"button",36),x("click",function(){let u=v(e).index,I=_();return f(I.goToPage(u+1))}),a(1),i()}if(n&2){let e=o.index,s=_();d("ngClass",s.currentPage===e+1?"bg-[#0D92F4] text-white border-blue-500":"bg-gray-100 text-gray-500 border-gray-300 hover:bg-gray-200 hover:text-gray-700"),t(),c(" ",e+1," ")}}var S=class n{constructor(o,e,s){this.gameHistoryService=o;this.alertService=e;this.loadingService=s}gameHistory=[];paginatedData=[];currentPage=1;itemsPerPage=5;showModal=!1;selectedAnswers=[];ngOnInit(){this.getGameHistory()}getGameHistory(){this.loadingService.showLoading(),this.gameHistoryService.getGameHistory().subscribe({next:o=>{this.loadingService.hideLoading(),this.gameHistory=o.data,this.updatePagination()},error:o=>{this.loadingService.hideLoading(),this.alertService.showAlert(o.message,!0)}})}updatePagination(){let o=(this.currentPage-1)*this.itemsPerPage,e=o+this.itemsPerPage;this.paginatedData=this.gameHistory.slice(o,e)}goToPage(o){this.currentPage=o,this.updatePagination()}nextPage(){this.currentPage*this.itemsPerPage<this.gameHistory.length&&(this.currentPage++,this.updatePagination())}prevPage(){this.currentPage>1&&(this.currentPage--,this.updatePagination())}get totalPages(){return Math.ceil(this.gameHistory.length/this.itemsPerPage)}openAnswersModal(o){this.selectedAnswers=o,this.showModal=!0}closeModal(){this.showModal=!1,this.selectedAnswers=[]}static \u0275fac=function(e){return new(e||n)(y(b),y(j),y($))};static \u0275cmp=B({type:n,selectors:[["app-game-history"]],standalone:!0,features:[P],decls:31,vars:26,consts:[["class","fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50",4,"ngIf"],[1,"py-10"],[1,"bg-white","shadow-md","rounded-lg","overflow-hidden"],[1,"overflow-x-auto"],[1,"min-w-full","table-auto"],[1,"bg-[#0D92F4]","text-white"],[1,"px-4","py-3","text-left","text-sm","font-medium","uppercase","tracking-wider","whitespace-nowrap"],["class","odd:bg-gray-50 even:bg-gray-100 hover:bg-gray-200",4,"ngFor","ngForOf"],[1,"flex","justify-center","items-center","mt-6","space-x-2"],[1,"px-4","py-2","text-sm","font-medium","text-gray-500","bg-gray-100","border","border-gray-300","rounded-md","hover:bg-gray-200","hover:text-gray-700","transition-colors","duration-300",3,"click","disabled","ngClass"],["class","px-4 py-2 text-sm font-medium border rounded-md transition-colors duration-300",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"fixed","inset-0","flex","items-center","justify-center","z-50","bg-black","bg-opacity-50"],[1,"bg-white","rounded-lg","shadow-lg","w-4/5","max-w-lg"],[1,"px-4","pt-4","border-b","border-gray-200"],[1,"text-xl","font-bold","text-gray-800","m-0"],[1,"p-6","max-h-[70vh]","overflow-y-auto"],[1,"space-y-6"],["class","text-gray-700",4,"ngFor","ngForOf"],[1,"p-4","border-t","border-gray-200","flex","justify-end"],[1,"px-6","py-2","bg-red-500","text-white","text-sm","font-semibold","rounded-lg","shadow","hover:bg-red-600","focus:outline-none","focus:ring","focus:ring-red-300","transition",3,"click"],[1,"text-gray-700"],[1,"font-semibold"],[1,"flex","items-center","space-x-2"],[1,"text-sm","text-gray-600"],["class","text-green-500 text-lg font-bold",4,"ngIf"],["class","text-red-500 text-lg font-bold",4,"ngIf"],["class","text-sm text-red-500",4,"ngIf"],["class","mt-6 border-t border-gray-300",4,"ngIf"],[1,"text-green-500","text-lg","font-bold"],[1,"text-red-500","text-lg","font-bold"],[1,"text-sm","text-red-500"],[1,"mt-6","border-t","border-gray-300"],[1,"odd:bg-gray-50","even:bg-gray-100","hover:bg-gray-200"],[1,"px-4","py-4","text-sm","text-gray-700","whitespace-nowrap"],[1,"px-4","py-4","text-sm","font-semibold",3,"ngClass"],[1,"px-4","py-2","bg-blue-500","text-white","rounded-lg","hover:bg-blue-600","transition-colors","duration-300",3,"click"],[1,"px-4","py-2","text-sm","font-medium","border","rounded-md","transition-colors","duration-300",3,"click","ngClass"]],template:function(e,s){e&1&&(g(0,ae,13,7,"div",0),r(1,"div",1)(2,"div",2)(3,"div",3)(4,"table",4)(5,"thead",5)(6,"tr")(7,"th",6),a(8,"Id"),i(),r(9,"th",6),a(10),l(11,"translate"),i(),r(12,"th",6),a(13),l(14,"translate"),i(),r(15,"th",6),a(16),l(17,"translate"),i(),r(18,"th",6),a(19),l(20,"translate"),i()()(),r(21,"tbody"),g(22,oe,13,8,"tr",7),i()()()(),r(23,"div",8)(24,"button",9),x("click",function(){return s.prevPage()}),a(25),l(26,"translate"),i(),g(27,se,2,2,"button",10),r(28,"button",9),x("click",function(){return s.nextPage()}),a(29),l(30,"translate"),i()()()),e&2&&(d("ngIf",s.showModal),t(10),m(p(11,13,"TABLE.CODE")),t(3),m(p(14,15,"TABLE.SCORE")),t(3),m(p(17,17,"TABLE.DURATION")),t(3),m(p(20,19,"TABLE.ACTIONS")),t(3),d("ngForOf",s.paginatedData),t(2),d("disabled",s.currentPage===1)("ngClass",s.currentPage===1?"opacity-50 cursor-not-allowed":""),t(),c(" \xAB ",p(26,21,"BUTTON_NAVIGATION_TABLE.PREVIOUS")," "),t(2),d("ngForOf",O(25,z).constructor(s.totalPages)),t(),d("disabled",s.currentPage===s.totalPages)("ngClass",s.currentPage===s.totalPages?"opacity-50 cursor-not-allowed":""),t(),c(" ",p(30,23,"BUTTON_NAVIGATION_TABLE.NEXT"),"\xBB "))},dependencies:[F,G,N,L,V,R]})};export{S as default};
