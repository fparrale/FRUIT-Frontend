import{a as u,b as R}from"./chunk-STFLDL63.js";import{a as p,b as v}from"./chunk-24SHYF34.js";import{G as i,X as m,_ as d,da as g,r as s}from"./chunk-NJXLY5TY.js";var U=class l{constructor(t,r){this.http=t;this.authService=r}apiUrlGameRooms=u.apiUrl+"game/game-rooms";apiUrlGameRoomsOne=u.apiUrl+"questions/get-game-room";apiUrlGameRoomAndQuestionId=u.apiUrl+"questions/get-game-room-question";apiUrlGameRoomsQuestionEdit=u.apiUrl+"game/edit-room-game-question";apiurlDeleteGameRoom=u.apiUrl+"game/delete-game-room";apiurlUploadExcel=u.apiUrl+"question/UploadQuestion";apiUrlGenerateReportGameRoom=u.apiUrl+"report/generate-report-teacher-game-room";apiUrlCreateGameRoom=u.apiUrl+"game/create-room-game-questions";apiurlEditGameRoom=u.apiUrl+"game/edit-game-room";apiUrlParticipatingPlayersByGameRoom=u.apiUrl+"game/get-participating-players";getGameRooms(){let t=this.authService.getUserData(),r=new p({Authorization:`Bearer ${t?.access_token}`});return this.http.get(this.apiUrlGameRooms,{headers:r}).pipe(m(a=>a),i(a=>s(()=>new Error(a.error.message||"Ocurrio un error intentalo mas tarde"))))}getGameRoomQuestions(t){let r=this.authService.getUserData(),a=new p({Authorization:`Bearer ${r?.access_token}`});return this.http.post(this.apiUrlGameRoomsOne,{room_id:t},{headers:a}).pipe(m(e=>e),i(e=>s(()=>new Error(e.error.message||"Ocurrio un error intentalo mas tarde"))))}getGameRoomQuestionsAndQuestionId(t,r){let a=this.authService.getUserData(),e=new p({Authorization:`Bearer ${a?.access_token}`});return this.http.post(this.apiUrlGameRoomAndQuestionId,{room_id:t,question_id:r},{headers:e}).pipe(m(n=>n),i(n=>s(()=>new Error(n.error.message||"Ocurrio un error intentalo mas tarde"))))}deleteGameRoom(t,r,a){let e=this.authService.getUserData(),n=new p({Authorization:`Bearer ${e?.access_token}`});return this.http.post(this.apiurlDeleteGameRoom,{game_room_id:t,status:r,language:a},{headers:n}).pipe(m(o=>o),i(o=>s(()=>new Error(o.error.message||"Ocurrio un error intentalo mas tarde"))))}generateReportGameRoom(t,r){let a=this.authService.getUserData(),e=new p({Authorization:`Bearer ${a?.access_token}`});return this.http.post(this.apiUrlGenerateReportGameRoom,{game_room_id:t,language:r},{headers:e,responseType:"blob",observe:"response"}).pipe(m(n=>n),i(n=>{let o="Ocurri\xF3 un error, int\xE9ntalo m\xE1s tarde";return n.error instanceof Blob?new Promise((y,h)=>{let c=new FileReader;c.onload=()=>{try{o=JSON.parse(c.result)?.message||o,h(new Error(o))}catch{h(new Error(o))}},c.onerror=()=>{h(new Error(o))},c.readAsText(n.error)}):(o=n?.error?.message||o,s(()=>new Error(o)))}))}uploadExcel(t){let r=this.authService.getUserData(),a=new p({Authorization:`Bearer ${r?.access_token}`});return this.http.post(this.apiurlUploadExcel,t,{headers:a}).pipe(m(e=>e),i(e=>s(()=>new Error(e.error.message||"Ocurrio un error intentalo mas tarde"))))}createGameRoom(t){let r=this.authService.getUserData(),a=new p({Authorization:`Bearer ${r?.access_token}`});return this.http.post(this.apiUrlCreateGameRoom,t,{headers:a}).pipe(m(e=>e),i(e=>s(()=>new Error(e.error.message||"Ocurrio un error intentalo mas tarde"))))}editGameRoomQuestion(t){let r=this.authService.getUserData(),a=new p({Authorization:`Bearer ${r?.access_token}`});return this.http.post(this.apiUrlGameRoomsQuestionEdit,t,{headers:a}).pipe(m(e=>e),i(e=>s(()=>new Error(e.error.message||"Ocurrio un error intentalo mas tarde"))))}updateExpirationDate(t){let r=this.authService.getUserData(),a=new p({Authorization:`Bearer ${r?.access_token}`});return this.http.post(this.apiurlEditGameRoom,t,{headers:a}).pipe(m(e=>e),i(e=>s(()=>new Error(e.error.message||"Ocurrio un error intentalo mas tarde"))))}getParticipatingPlayersByGameRoom(t){let r=this.authService.getUserData(),a=new p({Authorization:`Bearer ${r?.access_token}`});return this.http.post(this.apiUrlParticipatingPlayersByGameRoom,{gameRoomId:t},{headers:a}).pipe(m(e=>e),i(e=>s(()=>new Error(e.error.message||"Ocurrio un error intentalo mas tarde"))))}static \u0275fac=function(r){return new(r||l)(g(v),g(R))};static \u0275prov=d({token:l,factory:l.\u0275fac,providedIn:"root"})};export{U as a};
