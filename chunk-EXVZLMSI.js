import{a as U,b as V}from"./chunk-RK23KOMG.js";import{c as L,d as j}from"./chunk-EIXRTAYT.js";import{a as D,b as N}from"./chunk-XA5C6TME.js";import{a as F,b as k}from"./chunk-PWFTLQLJ.js";import{k as O,l as G,r as B}from"./chunk-N5F7BLGW.js";import{$ as C,Eb as s,Fb as p,G as S,Gb as d,Nb as T,Ob as A,Ra as r,Sa as g,Ub as c,Vb as l,X as _,db as f,ea as y,gb as m,ja as I,kb as a,lb as n,pb as E,r as P,sa as H,ta as w,tb as u,vb as x}from"./chunk-EU2SIFBO.js";var v=class o{constructor(t,e){this.http=t;this.authService=e}apiUrl=D.apiUrl+"game/game-history";getGameHistory(){let t=this.authService.getUserData(),e=new F({Authorization:`Bearer ${t?.access_token}`});return this.http.get(this.apiUrl,{headers:e}).pipe(_(i=>i),S(i=>P(()=>new Error(i.error.message||"Ocurrio un error intentalo mas tarde"))))}static \u0275fac=function(e){return new(e||o)(y(k),y(N))};static \u0275prov=C({token:o,factory:o.\u0275fac,providedIn:"root"})};var z=()=>[];function X(o,t){if(o&1&&(a(0,"tr",10)(1,"td",11),s(2),n(),a(3,"td",11),s(4),n(),a(5,"td",12),s(6),n(),a(7,"td",11),s(8),n()()),o&2){let e=t.$implicit;r(2),p(e.id),r(2),p(e.game_room.code),r(),m("ngClass",e.score>=70?"text-green-500":"text-red-500"),r(),d(" ",e.score," / 100 "),r(2),p(e.duration)}}function q(o,t){if(o&1){let e=E();a(0,"button",13),u("click",function(){let h=H(e).index,M=x();return w(M.goToPage(h+1))}),s(1),n()}if(o&2){let e=t.index,i=x();m("ngClass",i.currentPage===e+1?"bg-[#0D92F4] text-white border-blue-500":"bg-gray-100 text-gray-500 border-gray-300 hover:bg-gray-200 hover:text-gray-700"),r(),d(" ",e+1," ")}}var b=class o{constructor(t,e,i){this.gameHistoryService=t;this.alertService=e;this.loadingService=i}gameHistory=[];paginatedData=[];currentPage=1;itemsPerPage=5;ngOnInit(){this.getGameHistory()}getGameHistory(){this.loadingService.showLoading(),this.gameHistoryService.getGameHistory().subscribe({next:t=>{this.loadingService.hideLoading(),this.gameHistory=t.data,this.updatePagination()},error:t=>{this.loadingService.hideLoading(),this.alertService.showAlert(t.message,!0)}})}updatePagination(){let t=(this.currentPage-1)*this.itemsPerPage,e=t+this.itemsPerPage;this.paginatedData=this.gameHistory.slice(t,e)}goToPage(t){this.currentPage=t,this.updatePagination()}nextPage(){this.currentPage*this.itemsPerPage<this.gameHistory.length&&(this.currentPage++,this.updatePagination())}prevPage(){this.currentPage>1&&(this.currentPage--,this.updatePagination())}get totalPages(){return Math.ceil(this.gameHistory.length/this.itemsPerPage)}static \u0275fac=function(e){return new(e||o)(g(v),g(U),g(V))};static \u0275cmp=I({type:o,selectors:[["app-game-history"]],standalone:!0,features:[T],decls:27,vars:22,consts:[[1,"py-10"],[1,"bg-white","shadow-md","rounded-lg","overflow-hidden"],[1,"overflow-x-auto"],[1,"min-w-full","table-auto"],[1,"bg-[#0D92F4]","text-white"],[1,"px-4","py-3","text-left","text-sm","font-medium","uppercase","tracking-wider","whitespace-nowrap"],["class","odd:bg-gray-50 even:bg-gray-100 hover:bg-gray-200",4,"ngFor","ngForOf"],[1,"flex","justify-center","items-center","mt-6","space-x-2"],[1,"px-4","py-2","text-sm","font-medium","text-gray-500","bg-gray-100","border","border-gray-300","rounded-md","hover:bg-gray-200","hover:text-gray-700","transition-colors","duration-300",3,"click","disabled","ngClass"],["class","px-4 py-2 text-sm font-medium border rounded-md transition-colors duration-300",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"odd:bg-gray-50","even:bg-gray-100","hover:bg-gray-200"],[1,"px-4","py-4","text-sm","text-gray-700","whitespace-nowrap"],[1,"px-4","py-4","text-sm","font-semibold",3,"ngClass"],[1,"px-4","py-2","text-sm","font-medium","border","rounded-md","transition-colors","duration-300",3,"click","ngClass"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"table",3)(4,"thead",4)(5,"tr")(6,"th",5),s(7,"Id"),n(),a(8,"th",5),s(9),c(10,"translate"),n(),a(11,"th",5),s(12),c(13,"translate"),n(),a(14,"th",5),s(15),c(16,"translate"),n()()(),a(17,"tbody"),f(18,X,9,5,"tr",6),n()()()(),a(19,"div",7)(20,"button",8),u("click",function(){return i.prevPage()}),s(21),c(22,"translate"),n(),f(23,q,2,2,"button",9),a(24,"button",8),u("click",function(){return i.nextPage()}),s(25),c(26,"translate"),n()()()),e&2&&(r(9),p(l(10,11,"TABLE.CODE")),r(3),p(l(13,13,"TABLE.SCORE")),r(3),p(l(16,15,"TABLE.DURATION")),r(3),m("ngForOf",i.paginatedData),r(2),m("disabled",i.currentPage===1)("ngClass",i.currentPage===1?"opacity-50 cursor-not-allowed":""),r(),d(" \xAB ",l(22,17,"BUTTON_NAVIGATION_TABLE.PREVIOUS")," "),r(2),m("ngForOf",A(21,z).constructor(i.totalPages)),r(),m("disabled",i.currentPage===i.totalPages)("ngClass",i.currentPage===i.totalPages?"opacity-50 cursor-not-allowed":""),r(),d(" ",l(26,19,"BUTTON_NAVIGATION_TABLE.NEXT"),"\xBB "))},dependencies:[B,O,G,j,L]})};export{b as default};
