import{a as c,b as d}from"./chunk-N7H5NULU.js";import{a as p,b as R}from"./chunk-PWFTLQLJ.js";import{$ as g,G as i,X as m,ea as v,r as s}from"./chunk-EU2SIFBO.js";var b=class l{constructor(r,e){this.http=r;this.authService=e}apiUrlGameRooms=c.apiUrl+"game/game-rooms";apiurlDeleteGameRoom=c.apiUrl+"game/delete-game-room";apiurlUploadExcel=c.apiUrl+"question/UploadQuestion";apiUrlGenerateReportGameRoom=c.apiUrl+"report/generate-report-teacher-game-room";apiUrlCreateGameRoom=c.apiUrl+"game/create-room-game-questions";getGameRooms(){let r=this.authService.getUserData(),e=new p({Authorization:`Bearer ${r?.access_token}`});return this.http.get(this.apiUrlGameRooms,{headers:e}).pipe(m(t=>t),i(t=>s(()=>new Error(t.error.message||"Ocurrio un error intentalo mas tarde"))))}deleteGameRoom(r,e){let t=this.authService.getUserData(),a=new p({Authorization:`Bearer ${t?.access_token}`});return this.http.post(this.apiurlDeleteGameRoom,{game_room_id:r,status:e},{headers:a}).pipe(m(o=>o),i(o=>s(()=>new Error(o.error.message||"Ocurrio un error intentalo mas tarde"))))}generateReportGameRoom(r,e){let t=this.authService.getUserData(),a=new p({Authorization:`Bearer ${t?.access_token}`});return this.http.post(this.apiUrlGenerateReportGameRoom,{game_room_id:r,language:e},{headers:a,responseType:"blob",observe:"response"}).pipe(m(o=>o),i(o=>{let n="Ocurri\xF3 un error, int\xE9ntalo m\xE1s tarde";return o.error instanceof Blob?new Promise((U,h)=>{let u=new FileReader;u.onload=()=>{try{n=JSON.parse(u.result)?.message||n,h(new Error(n))}catch{h(new Error(n))}},u.onerror=()=>{h(new Error(n))},u.readAsText(o.error)}):(n=o?.error?.message||n,s(()=>new Error(n)))}))}uploadExcel(r){let e=this.authService.getUserData(),t=new p({Authorization:`Bearer ${e?.access_token}`});return this.http.post(this.apiurlUploadExcel,r,{headers:t}).pipe(m(a=>a),i(a=>s(()=>new Error(a.error.message||"Ocurrio un error intentalo mas tarde"))))}createGameRoom(r){let e=this.authService.getUserData(),t=new p({Authorization:`Bearer ${e?.access_token}`});return this.http.post(this.apiUrlCreateGameRoom,r,{headers:t}).pipe(m(a=>a),i(a=>s(()=>new Error(a.error.message||"Ocurrio un error intentalo mas tarde"))))}static \u0275fac=function(e){return new(e||l)(v(R),v(d))};static \u0275prov=g({token:l,factory:l.\u0275fac,providedIn:"root"})};export{b as a};
