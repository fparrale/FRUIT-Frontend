import{a as F}from"./chunk-ZEOQ2CJE.js";import{a as D,b as N}from"./chunk-RK23KOMG.js";import{a as k}from"./chunk-N77IRRRE.js";import{c as L,d as B}from"./chunk-EIXRTAYT.js";import"./chunk-N7H5NULU.js";import"./chunk-PWFTLQLJ.js";import{k as C,l as A,r as O}from"./chunk-N5F7BLGW.js";import{Eb as a,Fb as P,Gb as s,Nb as T,Ob as w,Ra as n,Sa as u,Ub as d,Vb as l,db as _,gb as p,ja as I,kb as r,lb as o,pb as S,sa as f,ta as b,tb as v,vb as h}from"./chunk-EU2SIFBO.js";var G=()=>[];function V(c,i){if(c&1){let e=S();r(0,"tr",10)(1,"td",11),a(2),o(),r(3,"td",11),a(4),o(),r(5,"td",11),a(6),o(),r(7,"td",11),a(8),o(),r(9,"td",11)(10,"div",12)(11,"button",13),v("click",function(){let m=f(e).$implicit,g=h();return b(g.onGenerateReportGameRoom(m))}),a(12),d(13,"translate"),o()()()()}if(c&2){let e=i.$implicit,t=h();n(2),P(e.id),n(2),P(e.code),n(2),s("",t.formatDate(e.created_at)," "),n(2),s("",t.formatDate(e.expiration_date)," "),n(4),s(" ",l(13,5,"REPORT.GENERATE_REPORT")," ")}}function j(c,i){if(c&1){let e=S();r(0,"button",14),v("click",function(){let m=f(e).index,g=h();return b(g.goToPage(m+1))}),a(1),o()}if(c&2){let e=i.index,t=h();p("ngClass",t.currentPage===e+1?"bg-[#0D92F4] text-white border-blue-500":"bg-gray-100 text-gray-500 border-gray-300 hover:bg-gray-200 hover:text-gray-700"),n(),s(" ",e+1," ")}}var R=class c{constructor(i,e,t,m){this.gameRoomsService=i;this.alertService=e;this.loadingService=t;this.serviceStorage=m}gameRooms=[];paginatedData=[];currentPage=1;itemsPerPage=5;selectedFile=null;ngOnInit(){this.getGameRooms()}getGameRooms(){this.loadingService.showLoading(),this.gameRoomsService.getGameRooms().subscribe({next:i=>{this.loadingService.hideLoading(),this.gameRooms=i.data,this.updatePagination()},error:i=>{this.loadingService.hideLoading(),this.alertService.showAlert(i.message,!0)}})}onGenerateReportGameRoom(i){this.loadingService.showLoading(),this.gameRoomsService.generateReportGameRoom(i.id,this.serviceStorage.getItem()||"es").subscribe({next:e=>{let t=e.headers.get("Content-Disposition"),m="reporte.pdf";if(t){let E=t.match(/filename="(.+)"/);E&&(m=E[1])}let g=e.body,y=window.URL.createObjectURL(g),x=document.createElement("a");x.href=y,x.download=m,x.click(),window.URL.revokeObjectURL(y),this.loadingService.hideLoading()},error:e=>{this.loadingService.hideLoading(),this.alertService.showAlert(e.message,!0)}})}updatePagination(){let i=(this.currentPage-1)*this.itemsPerPage,e=i+this.itemsPerPage;this.paginatedData=this.gameRooms.slice(i,e)}goToPage(i){this.currentPage=i,this.updatePagination()}nextPage(){this.currentPage*this.itemsPerPage<this.gameRooms.length&&(this.currentPage++,this.updatePagination())}prevPage(){this.currentPage>1&&(this.currentPage--,this.updatePagination())}get totalPages(){return Math.ceil(this.gameRooms.length/this.itemsPerPage)}formatDate(i){let e=new Date(i),t={day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"};return e.toLocaleDateString("es-ES",t).replace(",","")}static \u0275fac=function(e){return new(e||c)(u(F),u(D),u(N),u(k))};static \u0275cmp=I({type:c,selectors:[["app-report"]],standalone:!0,features:[T],decls:30,vars:25,consts:[[1,"py-5"],[1,"bg-white","shadow-md","rounded-lg","overflow-hidden"],[1,"overflow-x-auto"],[1,"min-w-full","table-auto"],[1,"bg-[#0D92F4]","text-white"],[1,"px-4","py-3","text-left","text-sm","font-medium","uppercase","tracking-wider","whitespace-nowrap"],["class","odd:bg-gray-50 even:bg-gray-100 hover:bg-gray-200",4,"ngFor","ngForOf"],[1,"flex","justify-center","items-center","mt-6","space-x-2"],[1,"px-4","py-2","text-sm","font-medium","text-gray-500","bg-gray-100","border","border-gray-300","rounded-md","hover:bg-gray-200","hover:text-gray-700","transition-colors","duration-300",3,"click","disabled","ngClass"],["class","px-4 py-2 text-sm font-medium border rounded-md transition-colors duration-300",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"odd:bg-gray-50","even:bg-gray-100","hover:bg-gray-200"],[1,"px-4","py-4","text-sm","text-gray-700","whitespace-nowrap"],[1,"flex","gap-2"],[1,"px-2","py-1","text-xs","font-medium","text-white","bg-[#28A745]","rounded","hover:bg-green-700","focus:outline-none",3,"click"],[1,"px-4","py-2","text-sm","font-medium","border","rounded-md","transition-colors","duration-300",3,"click","ngClass"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"table",3)(4,"thead",4)(5,"tr")(6,"th",5),a(7," Id"),o(),r(8,"th",5),a(9),d(10,"translate"),o(),r(11,"th",5),a(12),d(13,"translate"),o(),r(14,"th",5),a(15),d(16,"translate"),o(),r(17,"th",5),a(18),d(19,"translate"),o()()(),r(20,"tbody"),_(21,V,14,7,"tr",6),o()()()(),r(22,"div",7)(23,"button",8),v("click",function(){return t.prevPage()}),a(24),d(25,"translate"),o(),_(26,j,2,2,"button",9),r(27,"button",8),v("click",function(){return t.nextPage()}),a(28),d(29,"translate"),o()()()),e&2&&(n(9),s(" ",l(10,12,"TABLE.CODE"),""),n(3),s(" ",l(13,14,"TABLE.CREATION_DATE"),""),n(3),s(" ",l(16,16,"TABLE.EXPIRATION_DATE"),""),n(3),s(" ",l(19,18,"TABLE.ACTIONS"),""),n(3),p("ngForOf",t.paginatedData),n(2),p("disabled",t.currentPage===1)("ngClass",t.currentPage===1?"opacity-50 cursor-not-allowed":""),n(),s(" \xAB ",l(25,20,"BUTTON_NAVIGATION_TABLE.PREVIOUS")," "),n(2),p("ngForOf",w(24,G).constructor(t.totalPages)),n(),p("disabled",t.currentPage===t.totalPages)("ngClass",t.currentPage===t.totalPages?"opacity-50 cursor-not-allowed":""),n(),s(" ",l(29,22,"BUTTON_NAVIGATION_TABLE.NEXT")," \xBB "))},dependencies:[O,C,A,B,L]})};export{R as default};
