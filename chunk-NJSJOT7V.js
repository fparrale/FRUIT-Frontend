import{a as w}from"./chunk-DTHYORAV.js";import{a as B}from"./chunk-RK7DKULZ.js";import"./chunk-YUPXLDTA.js";import{l as G}from"./chunk-24SHYF34.js";import{Ab as c,Ac as P,Bb as T,Cb as l,Db as R,Ib as D,Jb as y,Lb as V,Qa as r,Qb as Q,Ra as S,Sb as I,bb as g,eb as m,gb as _,ia as C,ib as s,jb as o,kb as k,nb as h,pb as v,ra as u,rb as d,sa as f,tc as F,uc as N,vc as A,wb as q,wc as j,xb as M,xc as U,yb as E,za as O,zc as $}from"./chunk-NJXLY5TY.js";var K=i=>({"timer-warning":i}),x=class i{duration=60;timeUp=new O;timeRemainingChange=new O;timeRemaining=60;timer;ngOnInit(){this.timeRemaining=this.duration,this.startTimer()}ngOnDestroy(){this.stopTimer()}startTimer(){this.timer=setInterval(()=>{this.timeRemaining--,this.timeRemainingChange.emit(this.timeRemaining),this.timeRemaining<=0&&(this.stopTimer(),this.timeUp.emit())},1e3)}stopTimer(){this.timer&&clearInterval(this.timer)}resetTimer(){this.stopTimer(),this.timeRemaining=this.duration,this.startTimer()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=C({type:i,selectors:[["app-timer"]],inputs:{duration:"duration"},outputs:{timeUp:"timeUp",timeRemainingChange:"timeRemainingChange"},standalone:!0,features:[y],decls:2,vars:4,consts:[[1,"timer",3,"ngClass"]],template:function(e,n){e&1&&(s(0,"div",0),c(1),o()),e&2&&(m("ngClass",V(2,K,n.timeRemaining<=10)),r(),l(" Tiempo restante: ",n.timeRemaining," segundos "))},dependencies:[P,F],styles:[".timer[_ngcontent-%COMP%]{font-size:1.2em;font-weight:700;margin:10px 0;padding:10px;border-radius:4px;background-color:#e8f5e9}.timer-warning[_ngcontent-%COMP%]{background-color:#ffebee;color:#c62828;animation:_ngcontent-%COMP%_pulse 1s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:1}50%{opacity:.5}to{opacity:1}}"]})};function W(i,t){if(i&1){let e=h();s(0,"button",17),v("click",function(){let a=u(e).$implicit,p=d(3);return f(p.selectOption(a))}),c(1),o()}if(i&2){let e=t.$implicit,n=d(3);_("selected",n.selectedOption===e),m("disabled",!!n.feedback),r(),l(" ",e," ")}}function X(i,t){if(i&1&&(s(0,"div",14)(1,"h4"),c(2,"Paso 1: Identifica la Variable No Funcional"),o(),s(3,"div",15),g(4,W,2,4,"button",16),o()()),i&2){let e=d(2);r(4),m("ngForOf",e.question.variable.options)}}function Z(i,t){if(i&1){let e=h();s(0,"button",17),v("click",function(){let a=u(e).$implicit,p=d(3);return f(p.selectOption(a))}),c(1),o()}if(i&2){let e=t.$implicit,n=d(3);_("selected",n.selectedOption===e),m("disabled",!!n.feedback),r(),l(" ",e," ")}}function ee(i,t){if(i&1&&(s(0,"div",14)(1,"h4"),c(2,"Paso 2: Identifica el Valor No Funcional"),o(),s(3,"div",15),g(4,Z,2,4,"button",16),o()()),i&2){let e=d(2);r(4),m("ngForOf",e.question.value.options)}}function te(i,t){if(i&1){let e=h();s(0,"button",17),v("click",function(){let a=u(e).$implicit,p=d(3);return f(p.selectOption(a))}),c(1),o()}if(i&2){let e=t.$implicit,n=d(3);_("selected",n.selectedOption===e),m("disabled",!!n.feedback),r(),l(" ",e," ")}}function ie(i,t){if(i&1&&(s(0,"div",14)(1,"h4"),c(2,"Paso 3: Selecciona la Mejor Recomendaci\xF3n T\xE9cnica"),o(),s(3,"div",15),g(4,te,2,4,"button",16),o()()),i&2){let e=d(2);r(4),m("ngForOf",e.question.recommendation.options)}}function ne(i,t){if(i&1){let e=h();s(0,"div",20)(1,"button",21),v("click",function(){u(e);let a=d(3);return f(a.nextStep())}),c(2),o()()}if(i&2){let e=d(3);r(2),l(" ",e.isLastStep?"Finalizar Juego":"Siguiente Pregunta"," ")}}function oe(i,t){if(i&1&&(s(0,"div",18)(1,"p"),c(2),o(),g(3,ne,3,1,"div",19),o()),i&2){let e=d(2);_("feedback-correct",e.isCorrect)("feedback-incorrect",!e.isCorrect),r(2),T(e.feedback),r(),m("ngIf",e.showNextButton)}}function re(i,t){if(i&1){let e=h();s(0,"div",5)(1,"app-timer",6),v("timeUp",function(){u(e);let a=d();return f(a.onTimeUp())})("timeRemainingChange",function(a){u(e);let p=d();return f(p.updateTimeRemaining(a))}),o(),s(2,"div",7)(3,"h3"),c(4),o(),s(5,"p"),c(6),o()(),s(7,"div",8),g(8,X,5,1,"div",9)(9,ee,5,1,"div",9)(10,ie,5,1,"div",9),o(),g(11,oe,4,6,"div",10),s(12,"div",11)(13,"div",12),c(14,"1"),o(),k(15,"div",13),s(16,"div",12),c(17,"2"),o(),k(18,"div",13),s(19,"div",12),c(20,"3"),o()()()}if(i&2){let e=d();r(),m("duration",30),r(3),R("Requisito No Funcional #",e.questionIndex+1," de ",e.questions.length,":"),r(2),T(e.question.requirement),r(),m("ngSwitch",e.currentStep),r(),m("ngSwitchCase","variable"),r(),m("ngSwitchCase","value"),r(),m("ngSwitchCase","recommendation"),r(),m("ngIf",e.feedback),r(2),_("active",e.currentStep==="variable"),r(3),_("active",e.currentStep==="value"),r(3),_("active",e.currentStep==="recommendation")}}function se(i,t){if(i&1){let e=h();s(0,"div",22)(1,"h2"),c(2,"\xA1Juego Completado!"),o(),s(3,"p",23),c(4),Q(5,"number"),o(),s(6,"button",24),v("click",function(){u(e);let a=d();return f(a.restartGame())}),c(7," Jugar de Nuevo "),o()()}if(i&2){let e=d();r(4),l("Puntuaci\xF3n Final es ",I(5,1,e.totalScore,"1.0-2")," sobre 100")}}var z=class i{constructor(t,e,n){this.questionService=t;this.router=e;this.gameDataParamsService=n}question;timer;currentStep="variable";selectedOption="";feedback="";isCorrect=!1;showNextButton=!1;currentTimeRemaining=30;questionIndex=0;totalScore=0;gameCompleted=!1;totalScoreCompleted=0;score=0;questions=[];questionsTransformed=[];currentQuestion;currentQuestionIndex=0;questionWords=[];variable=[];feedback1=[];value=[];feedback2=[];recomend=[];feedback3=[];validar=[];answers=[];ngOnInit(){let t=this.gameDataParamsService.getGameData(),e=0;if(t!=null)this.questions=t,this.questionsTransformed=this.transformQuestions(this.questions),this.question=this.questionsTransformed[this.questionIndex],e=this.questionsTransformed.length*3,this.totalScoreCompleted=100/e;else{let n=this.gameDataParamsService.getGamePracticeDataLocalStorage();n!=null?(this.questions=n,this.questionsTransformed=this.transformQuestions(this.questions),this.question=this.questionsTransformed[this.questionIndex],e=this.questionsTransformed.length*3,this.totalScoreCompleted=100/e):this.router.navigate(["/game"])}}updateTimeRemaining(t){this.currentTimeRemaining=t}onTimeUp(){this.feedback||this.checkAnswer(!0)}selectOption(t){this.selectedOption=t,this.checkAnswer()}checkAnswer(t=!1){if(t&&!this.selectedOption){this.feedback="\xA1Se acab\xF3 el tiempo! Debes seleccionar una opci\xF3n m\xE1s r\xE1pido.",this.isCorrect=!1,this.showNextButton=!0;return}let e=this.question[this.currentStep];this.isCorrect=this.selectedOption===e.correct,this.feedback=e.feedback,this.showNextButton=!0}nextStep(){this.score=this.isCorrect?this.totalScoreCompleted:0,this.isLastStep?this.onQuestionCompleted(0):(this.selectedOption="",this.feedback="",this.showNextButton=!1,this.currentStep==="variable"?this.currentStep="value":this.currentStep==="value"?this.currentStep="recommendation":this.currentStep==="recommendation"&&(this.questionIndex++,this.questionIndex<this.questionsTransformed.length?(this.question=this.questionsTransformed[this.questionIndex],this.currentStep="variable"):this.onQuestionCompleted(0)),this.sumScore(this.score),this.timer.resetTimer())}get isLastStep(){return this.currentStep==="recommendation"&&this.questionIndex===this.questionsTransformed.length-1}generateRandomWords(){let t=[],e="abcdefghijklmnopqrstuvwxyz";for(let n=0;n<3;n++){let a="",p=Math.floor(Math.random()*5)+3;for(let b=0;b<p;b++)a+=e.charAt(Math.floor(Math.random()*e.length));t.push(a)}return t}generateOptionsWithVariations(t){let e=[`${t}ly`,`super${t}`,`${t}s`,...this.generateRandomWords()];return Array.from(new Set([t,...e]))}generateOptionsFromDictionary(t){let n=["performance","speed","optimization","efficiency","scalability","latency"].sort(()=>.5-Math.random()).slice(0,3);return Array.from(new Set([t,...n]))}generateDynamicOptions(t){let e=[...this.generateRandomWords(),...this.generateOptionsWithVariations(t),...this.generateOptionsFromDictionary(t)],n=Array.from(new Set([...e]));n.includes(t)||n.push(t);let a=this.shuffleArray(n),p=[t,...a.filter(L=>L!==t)].slice(0,4),b=this.shuffleArray(p);return this.reverseArray(b)}shuffleArray(t){return t.sort(()=>Math.random()-.5)}reverseArray(t){return t.reverse()}transformQuestions(t){return t.map(e=>({requirement:e.nfr,variable:{options:this.generateDynamicOptions(e.variable),correct:e.variable,feedback:e.feedback1},value:{options:this.generateDynamicOptions(e.value),correct:e.value,feedback:e.feedback2},recommendation:{options:this.generateDynamicOptions(e.recomend),correct:e.recomend,feedback:e.feedback3}}))}onQuestionCompleted(t){this.currentQuestion||(this.gameCompleted=!0)}restartGame(){window.location.reload()}sumScore(t){this.totalScore+=t}static \u0275fac=function(e){return new(e||i)(S(w),S(G),S(B))};static \u0275cmp=C({type:i,selectors:[["app-practice-questions"]],viewQuery:function(e,n){if(e&1&&q(x,5),e&2){let a;M(a=E())&&(n.timer=a.first)}},inputs:{question:"question"},standalone:!0,features:[D([w]),y],decls:9,vars:6,consts:[[1,"container"],[1,"header"],[1,"score-display"],["class","card question-card",4,"ngIf"],["class","completion-card card",4,"ngIf"],[1,"card","question-card"],[3,"timeUp","timeRemainingChange","duration"],[1,"requirement-text"],[1,"step-container",3,"ngSwitch"],["class","step",4,"ngSwitchCase"],["class","feedback",3,"feedback-correct","feedback-incorrect",4,"ngIf"],[1,"progress-bar"],[1,"progress-step"],[1,"progress-line"],[1,"step"],[1,"options-grid"],["class","option-button",3,"selected","disabled","click",4,"ngFor","ngForOf"],[1,"option-button",3,"click","disabled"],[1,"feedback"],["class","next-button-container",4,"ngIf"],[1,"next-button-container"],[1,"bg-blue-500","hover:bg-blue-700","text-white","font-bold","py-2","px-4","border","border-blue-700","rounded",3,"click"],[1,"completion-card","card"],[1,"final-score"],[1,"btn","btn-primary",3,"click"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"header",1)(2,"h3"),c(3,"Identificaci\xF3n de Requisitos No Funcionales"),o(),s(4,"div",2),c(5),Q(6,"number"),o()(),g(7,re,21,15,"div",3)(8,se,8,4,"div",4),o()),e&2&&(r(5),l("Puntuaci\xF3n: ",I(6,3,n.totalScore,"1.0-2"),""),r(2),m("ngIf",!n.gameCompleted),r(),m("ngIf",n.gameCompleted))},dependencies:[x,P,N,A,j,U,$],styles:[".question-card[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.requirement-text[_ngcontent-%COMP%]{margin-bottom:20px;padding:15px;background-color:#f8f9fa;border-radius:8px}.options-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:10px;margin:15px 0}.option-button[_ngcontent-%COMP%]{padding:15px;border:2px solid #ddd;border-radius:8px;background:#fff;cursor:pointer;transition:all .3s ease}.option-button[_ngcontent-%COMP%]:hover:not([disabled]){background:#f0f0f0;transform:translateY(-2px)}.option-button.selected[_ngcontent-%COMP%]{border-color:#1976d2;background:#e3f2fd}.feedback[_ngcontent-%COMP%]{padding:15px;margin-top:20px;border-radius:8px}.feedback-correct[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#2e7d32}.feedback-incorrect[_ngcontent-%COMP%]{background-color:#ffebee;color:#c62828}.progress-bar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-top:20px}.progress-step[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;background:#ddd;display:flex;align-items:center;justify-content:center;font-weight:700}.progress-step.active[_ngcontent-%COMP%]{background:#1976d2;color:#fff}.progress-line[_ngcontent-%COMP%]{height:2px;width:50px;background:#ddd}.next-button-container[_ngcontent-%COMP%]{margin-top:15px;text-align:right}.container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;padding:20px}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px}.score-display[_ngcontent-%COMP%]{font-size:1.5em;font-weight:700;color:#1976d2}.completion-card[_ngcontent-%COMP%]{text-align:center;padding:40px}.final-score[_ngcontent-%COMP%]{font-size:2em;color:#1976d2;margin:20px 0}"]})};export{z as PracticeQuestionsComponent};
